/*! For license information please see 253.pressai.min.js.LICENSE.txt */
"use strict";(self.webpackChunkpressai=self.webpackChunkpressai||[]).push([[253],{1253:(t,e,r)=>{r.r(e),r.d(e,{ChatBot:()=>A});var n=r(7294),o=r(7882);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}var i=["timestamp"];function c(){c=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function f(t,e,r,o){var a=e&&e.prototype instanceof m?e:m,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:O(t,r,c)}),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var p={};function m(){}function y(){}function d(){}var v={};s(v,i,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(L([])));b&&b!==e&&r.call(b,i)&&(v=b);var w=d.prototype=m.prototype=Object.create(v);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function o(n,i,c,l){var u=h(t[n],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==a(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,c,l)}),(function(t){o("throw",t,c,l)})):e.resolve(f).then((function(t){s.value=t,c(s)}),(function(t){return o("throw",t,c,l)}))}l(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=S(i,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=h(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return y.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:y,configurable:!0}),y.displayName=s(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(E.prototype),s(E.prototype,l,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new E(f(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(w),s(w,u,"Generator"),s(w,i,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function l(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function u(t,e,r,n,o,a,i){try{var c=t[a](i),l=c.value}catch(t){return void r(t)}c.done?e(l):Promise.resolve(l).then(n,o)}var s=function(){var t,e=(t=c().mark((function t(e){var r,n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.conversation.map((function(t){return t.timestamp,l(t,i)})),t.next=3,fetch("/wp-json/pressai/v1/send_message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversation:r})});case 3:return n=t.sent,t.next=6,n.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){u(a,n,o,i,c,"next",t)}function c(t){u(a,n,o,i,c,"throw",t)}i(void 0)}))});return function(t){return e.apply(this,arguments)}}();const f=function(){return n.createElement("div",{className:"typing-animation"},n.createElement("span",null),n.createElement("span",null),n.createElement("span",null))};var h=r(9311),p=r(3731);function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const y=function(t){var e,r,a,i=(e=(0,n.useState)(new Date),r=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,r)||function(t,e){if(t){if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(t,e):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=i[0],l=i[1];return(0,n.useEffect)((function(){var t=setInterval((function(){l(new Date)}),6e4);return function(){return clearInterval(t)}}),[]),n.createElement("div",{className:"flex w-full justify-start gap-3"},t.chatbotSettings.botAvatar&&n.createElement("div",{className:"inline-flex h-10 w-10 shrink-0 overflow-hidden rounded-full text-gray-400 bg-gray-200 ring-1 ring-gray-200 items-center justify-center"},n.createElement(o.Z,{iconName:"fa-solid fa-user-large"})),n.createElement("div",null,n.createElement("div",{className:"rounded-b-xl rounded-r-xl p-3 text-white",style:{backgroundColor:t.chatbotSettings.color||"#7031f5"}},n.createElement("p",{className:"whitespace-pre-wrap text-sm"},n.createElement(p.Z,{componentDecorator:function(t,e,r){return n.createElement("a",{href:t,key:r,target:"_blank",rel:"noopener noreferrer",style:{color:"blue"}},e)}},t.content))),n.createElement("span",{className:"text-xs leading-none text-gray-500"},(a=t.timestamp,(c-new Date(a))/1e3/60<1?"Just now":(0,h.Z)(new Date(a))+" ago"))))};function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const v=function(t){var e,r,a,i=(e=(0,n.useState)(new Date),r=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,r)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=i[0],l=i[1];return(0,n.useEffect)((function(){var t=setInterval((function(){l(new Date)}),6e4);return function(){return clearInterval(t)}}),[]),n.createElement("div",{className:"relative flex w-full gap-3"},t.chatbotSettings.botAvatar&&n.createElement("div",{className:"inline-flex h-10 w-10 shrink-0 overflow-hidden rounded-full text-white ring-1 ring-gray-200 items-center justify-center",style:{backgroundColor:t.chatbotSettings.color||"#7031f5"}},n.createElement(o.Z,{iconName:t.chatbotSettings.botAvatar||"fa-solid fa-robot"})),n.createElement("div",null,n.createElement("div",{className:"rounded-r-xl rounded-bl-xl bg-gray-200 p-3"},n.createElement("p",{className:"whitespace-pre-wrap text-sm"},n.createElement(p.Z,{componentDecorator:function(t,e,r){return n.createElement("a",{href:t,key:r,target:"_blank",rel:"noopener noreferrer",style:{color:"blue"}},e)}},t.content))),t.chatbotSettings.customSupportLink&&n.createElement("details",{className:"mt-3"},n.createElement("summary",{className:"cursor-pointer text-sm font-semibold text-gray-500 open:text-gray-900"},"Support"),n.createElement("div",{className:"mt-1"},n.createElement("div",{className:"mt-2 flex flex-wrap gap-1.5"},n.createElement("a",{href:t.chatbotSettings.customSupportLink,className:"w-48 truncate rounded-lg border border-gray-200 bg-white px-2 py-1 text-xs font-semibold text-gray-500 transition-all duration-150 after:-ml-0.5 after:text-gray-500 hover:border-gray-900 hover:bg-gray-100 hover:text-gray-900",target:"_blank",rel:"noreferrer"},"/support")))),n.createElement("span",{className:"text-xs leading-none text-gray-500"},(a=t.timestamp,(c-new Date(a))/1e3/60<1?"Just now":(0,h.Z)(new Date(a))+" ago"))))};var g=r(3453);function b(){return b=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},b.apply(this,arguments)}const w=function(t){return n.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1009 1005"},t),n.createElement("path",{d:"M721.52 109.92H301.53c-140.32 0-254.48 114.15-254.48 254.48v540.53l226.94-169.62a46.002 46.002 0 0 1 27.53-9.15h419.99c140.32 0 254.48-114.16 254.48-254.48V364.41c0-140.32-114.16-254.48-254.48-254.48Zm85.85 361.75c0 47.34-38.51 85.85-85.85 85.85H301.53c-47.34 0-85.85-38.51-85.85-85.85V364.4c0-47.34 38.51-85.85 85.85-85.85h419.99c47.34 0 85.85 38.51 85.85 85.85v107.27Z",style:{fill:"#7031f5"}}),n.createElement("path",{d:"M721.52 186.57H301.53c-98.06 0-177.83 79.77-177.83 177.83v107.27c0 98.06 79.77 177.83 177.83 177.83h419.99c98.06 0 177.83-79.77 177.83-177.83V364.4c0-98.06-79.77-177.83-177.83-177.83Zm85.85 285.1c0 47.34-38.51 85.85-85.85 85.85H301.53c-47.34 0-85.85-38.51-85.85-85.85V364.4c0-47.34 38.51-85.85 85.85-85.85h419.99c47.34 0 85.85 38.51 85.85 85.85v107.27Z",style:{fill:"#7031f5"}}),n.createElement("circle",{cx:354.89,cy:418.04,r:56.72,style:{fill:"#7031f5"}}),n.createElement("circle",{cx:668.16,cy:418.04,r:56.72,style:{fill:"#7031f5"}}))};function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function E(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function O(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(Object(r),!0).forEach((function(e){S(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function S(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==x(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===x(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function j(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||P(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(){N=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var a=e&&e.prototype instanceof h?e:h,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:E(t,r,c)}),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function h(){}function p(){}function m(){}var y={};l(y,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(L([])));v&&v!==e&&r.call(v,a)&&(y=v);var g=m.prototype=h.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,a,i,c){var l=s(t[n],t,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==x(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,i,c)}),(function(t){o("throw",t,i,c)})):e.resolve(f).then((function(t){u.value=t,i(u)}),(function(t){return o("throw",t,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=m,n(g,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),l(w.prototype,i,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new w(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},b(g),l(g,c,"Generator"),l(g,a,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function k(t,e,r,n,o,a,i){try{var c=t[a](i),l=c.value}catch(t){return void r(t)}c.done?e(l):Promise.resolve(l).then(n,o)}function L(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){k(a,n,o,i,c,"next",t)}function c(t){k(a,n,o,i,c,"throw",t)}i(void 0)}))}}function I(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||P(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){if(t){if("string"==typeof t)return _(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(t,e):void 0}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var A=function(t){var e=I((0,n.useState)(t.conversation),2),r=e[0],a=e[1],i=I((0,n.useState)(!1),2),c=i[0],l=i[1],u=I((0,n.useState)(!1),2),h=u[0],p=u[1],m=(0,n.useRef)(),d=I((0,n.useState)({}),2),b=d[0],x=d[1],E=I((0,n.useState)(!1),2),S=E[0],k=E[1],P=I((0,n.useState)(!1),2),_=P[0],A=P[1],T=n.createRef();(0,n.useEffect)((function(){T.current&&T.current.focus()}),[r]),(0,n.useEffect)((function(){var t=function(){var t=L(N().mark((function t(){var e;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,g.Rl)("pressai_chatbot_config");case 2:e=t.sent,x(e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]);var C=function(){var t=L(N().mark((function t(){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a(r.slice(0,2));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),D=function(){var t=L(N().mark((function t(){var e,n,o,i,c,l;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=F(window.location.pathname),!(n=Z(e))){t.next=16;break}return t.next=5,fetch(n);case 5:return o=t.sent,t.next=8,o.json();case 8:return i=t.sent,c=G(e,i),l={role:"system",content:c,timestamp:(new Date).toISOString()},a([].concat(j(r),[l])),t.next=14,H(l);case 14:t.next=18;break;case 16:a([].concat(j(r),[{role:"assistant",content:"We are sorry, but we are unable to help you at this time."}])),B();case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function G(t,e){var r="You are a helping chat-bot, designed to answer user questions based on the specific given context only. If a user asks a question that doesn't relate to the given context, please redirect them back to the topic at hand, and remind them to stay within the parameters of the provided information. Answering questions unrelated to the topic is not your purpose. Do not attempt to provide information that isn't available in the context provided.";"English"!==b.language&&(r+="Behave like a chatbot who always speaks "+b.language+". ");var n=0;e.forEach((function(t){n+=t.content.rendered.length}));var o=(3e3-r.length)/n;if("post"===t.type||"page"===t.type){r+="First greet user based on page content. Here is the page content: \n",e&&e[0]&&e[0].title?r+="Title: "+e[0].title.rendered+"\n":console.error("Unexpected data structure",e);var a=Math.floor(e[0].content.rendered.length*o);r+="Content: "+e[0].content.rendered.substring(0,a)}else if("homepage"===t.type||"archive"===t.type){var i="homepage"===t.type?"homepage":"archive",c="category"===t.taxonomy?"Category":"Tag";r+="First greet user based on the ".concat(i," content. Here are the latest posts: \n"),"archive"===t.type&&(r+="Here are the posts in the ".concat(c," '").concat(t.taxonomySlugOrId,"': \n")),e.forEach((function(t){r+="Title: "+t.title.rendered+"\n";var e=Math.floor(t.content.rendered.length*o);r+="Content: "+t.content.rendered.substring(0,e)+"\n\n"}))}return r}function Z(t){var e;if("post"===t.type||"page"===t.type)e="/wp-json/wp/v2/".concat(t.type,"s?slug=").concat(t.slugOrId);else if("homepage"===t.type)e="/wp-json/wp/v2/posts?per_page=10";else if("archive"===t.type){var r="category"===t.taxonomy?"categories":"tags";e="/wp-json/wp/v2/posts?".concat(r,"=").concat(t.taxonomySlugOrId)}return e}function F(t){var e=t.split("/").filter((function(t){return""!==t}));if(0===e.length)return{type:"homepage"};if(e.includes("category")||e.includes("tag")){var r=e.includes("category")?"category":"tag";return{type:"archive",taxonomy:r,taxonomySlugOrId:e[e.indexOf(r)+1]}}var n=e[e.length-1],o=isNaN(n)?n:"p="+n;return{type:e.includes("page")?"page":"post",slugOrId:o}}var M=function(t){var e=T.current.value;T.current.value="";var r={role:"user",content:e,timestamp:(new Date).toISOString()};a((function(t){return[].concat(j(t),[r])})),H(r)},H=function(){var t=L(N().mark((function t(e){var n,o;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return B(),p(!0),t.next=4,s({conversation:[].concat(j(r),[e])});case 4:n=t.sent,p(!1),n&&n.hasOwnProperty("content")?(r.length<=1&&""!==b.firstMessage?(o={role:"assistant",content:b.firstMessage,timestamp:(new Date).toISOString()},a((function(t){return[].concat(j(t),[o])}))):a((function(t){return[].concat(j(t),[O(O({},n),{},{timestamp:(new Date).toISOString()})])})),B()):console.error("Invalid assistant response: ",n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),B=function(){m.current&&setTimeout((function(){m.current.scrollIntoView({behavior:"smooth"})}),100)};return n.createElement("div",null,n.createElement("div",{className:"fixed bottom-20 ".concat("right"===b.buttonAlignment?"right-4":"left-4","  ").concat(c?"":"hidden"),style:{zIndex:9999}},n.createElement("div",{className:"flex h-96 flex-1 overflow-hidden border border-gray-200 bg-white shadow-xl sm:h-[80dvh] sm:rounded-xl",style:{width:"400px"}},n.createElement("div",{className:"flex w-full flex-1 overflow-hidden border border-gray-200 bg-white shadow-xl sm:h-[80dvh] sm:max-w-md sm:rounded-xl"},n.createElement("div",{className:"flex min-h-0 flex-1 flex-col"},n.createElement("div",{className:"shrink-0 px-4 py-3 border-b"},n.createElement("div",{className:"flex items-center justify-between gap-6"},n.createElement("p",{className:"min-w-0 flex-1 text-lg font-bold text-gray-900"},b.name||"Press AI"),n.createElement("div",{className:"flex items-center justify-end gap-4"},n.createElement("button",{onClick:C,onMouseEnter:function(){return k(!0)},onMouseLeave:function(){return k(!1)},className:"inline-flex w-8 h-8 items-center justify-center rounded-full border border-gray-200 p-1.5 shadow-sm transition-all duration-150 focus:outline-none ".concat(S?"text-white":"text-gray-900"),style:{backgroundColor:S?b.color||"#7031f5":"transparent"}},n.createElement(o.Z,{iconName:"fa-solid fa-trash-can",className:"w-3 h-3"})),n.createElement("button",{onClick:function(){l(!1)},onMouseEnter:function(){return A(!0)},onMouseLeave:function(){return A(!1)},className:"-m-1.5 inline-flex w-8 h-8 items-center justify-center rounded-full border border-gray-200 p-1.5 shadow-sm transition-all duration-150 focus:outline-none ".concat(_?"text-white":"text-gray-900"),style:{backgroundColor:_?b.color||"#7031f5":"transparent"}},n.createElement(o.Z,{iconName:"fa-solid fa-xmark"}))))),n.createElement("div",{id:"chat-bubble-container",className:"flex flex-1 flex-col space-y-6 overflow-y-auto p-4"},b.description&&n.createElement("div",{className:"bg-pressai-light text-pressai-primary border-pressai-primary border p-4 rounded-md mb-4"},n.createElement("p",{className:"text-sm text-center"},b.description)),r.map((function(t,e){return"system"!==t.role?n.createElement("div",{key:e,ref:e===r.length-1?m:null},"user"===t.role?n.createElement(y,{content:t.content,timestamp:t.timestamp,chatbotSettings:b}):n.createElement(v,{content:t.content,timestamp:t.timestamp,chatbotSettings:b})):null})),h&&n.createElement("div",{className:"assistant"},n.createElement(f,null))),n.createElement("div",{className:"shrink-0 px-4 py-3"},n.createElement("div",{className:"relative"},n.createElement("div",null,n.createElement("label",{className:"sr-only"},"Write message"),n.createElement("input",{ref:T,onKeyDown:function(t){"Enter"===t.key&&""!==T.current.value.trim()&&M()},type:"text",placeholder:"Ask me anything about this site...",className:"block w-full resize-none rounded-full border-transparent bg-gray-100 py-3 pl-4 pr-24 text-base text-gray-900 caret-blue-500 placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500","aria-label":"Write message",autoComplete:"off"})),n.createElement("div",{className:"absolute inset-y-0 right-1 flex items-center"},n.createElement("button",{onClick:M,className:"inline-flex items-center justify-center gap-2 rounded-full border border-transparent p-2 text-sm font-semibold text-white shadow-sm transition-all duration-200 hover:opacity-80 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",style:{backgroundColor:b.color||"#7031f5"}},n.createElement(o.Z,{iconName:"fa-solid fa-paper-plane",size:"xl"}))))),b.showBranding&&n.createElement("div",{className:"flex items-center justify-center gap-1.5 px-4 pb-3"},n.createElement("p",{className:"text-sm tracking-tight text-gray-400"},"Powered by"),n.createElement("div",{className:"flex items-center gap-1"},n.createElement(w,{className:"h-4 w-auto"}),n.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://press.ai",className:"isomorphic-link isomorphic-link--external text-sm font-medium tracking-tight text-gray-500 transition-all duration-150 hover:text-blue-500 hover:underline",style:{whiteSpace:"nowrap"}},"Press AI"))))))),0!==Object.keys(b).length&&n.createElement("button",{onClick:function(t){l(!c),c||0!==r.length||D()},className:"fixed bottom-4 ".concat("right"===b.buttonAlignment?"right-4":"left-4"," text-white ").concat(b.showButtonText&&!c?"w-auto":"w-14"," h-14 flex items-center justify-center rounded-full px-4"),style:{backgroundColor:b.color||"#7031f5"}},c?n.createElement(o.Z,{iconName:"fa-solid fa-xmark",size:"xl"}):n.createElement(n.Fragment,null,n.createElement(o.Z,{iconName:b.buttonIcon||"fa-solid fa-robot",size:"xl"}),b.showButtonText&&n.createElement("span",{className:"ml-2"},b.buttonText||"Chat"))))};A.defaultProps={conversation:[]}}}]);